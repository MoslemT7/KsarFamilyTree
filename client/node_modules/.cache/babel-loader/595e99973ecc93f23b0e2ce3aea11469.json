{"ast":null,"code":"var _jsxFileName = \"D:\\\\Study\\\\Projects\\\\El-Kasr Family Tree\\\\client\\\\src\\\\components\\\\SearchPage.js\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect } from 'react';\nimport \"./SearchPage.css\";\nimport Tree from 'react-d3-tree';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst translations = require('./translation.json');\nrequire('dotenv').config();\nconst neo4jURI = process.env.REACT_APP_NEO4J_URI;\nconst neo4jUser = process.env.REACT_APP_NEO4J_USER;\nconst neo4jPassword = process.env.REACT_APP_NEO4J_PASSWORD;\nconst driver = require('neo4j-driver').driver(neo4jURI, require('neo4j-driver').auth.basic(neo4jUser, neo4jPassword));\nexport const translateName = (fullName, language = true) => {\n  const nameParts = fullName.split(' ');\n  const reverseTranslations = Object.fromEntries(Object.entries(translations).map(([key, value]) => [value, key]));\n  const dict = language ? translations : reverseTranslations;\n  const translatedParts = nameParts.map(part => dict[part] || part);\n  return translatedParts.join(' ');\n};\nfunction splitName(fullName) {\n  const parts = fullName.replace(/ ben /gi, ' ').split(/\\s+/);\n  if (parts.length === 2) {\n    return {\n      personName: parts[0],\n      fatherName: \"\",\n      grandfatherName: \"\",\n      familyName: parts[1]\n    };\n  } else if (parts.length === 3) {\n    return {\n      personName: parts[0],\n      fatherName: parts[1],\n      grandfatherName: \"\",\n      familyName: parts[2]\n    };\n  } else if (parts.length === 4) {\n    return {\n      personName: parts[0],\n      fatherName: parts[1],\n      grandfatherName: parts[2],\n      familyName: parts[3]\n    };\n  }\n  // Default case if structure doesn't match\n  return {\n    personName: parts[0],\n    fatherName: \"\",\n    grandfatherName: \"\",\n    familyName: parts[1]\n  };\n}\nconst SearchPage = () => {\n  _s();\n  var _personDetails$person, _personDetails$person2, _personDetails$father, _personDetails$grandf, _personDetails$family, _personDetails$mother, _personDetails$mother2, _personDetails$mother3, _personDetails$mother4;\n  const [treeVisible, setTreeVisible] = useState(false);\n  const [searchQuery, setSearchQuery] = useState('');\n  const [personDetails, setPersonDetails] = useState(null);\n  const [treeData, setTreeData] = useState(null);\n  const [error, setError] = useState('');\n  const getChildrenOfFather = async fatherId => {\n    const session = driver.session();\n    try {\n      const result = await session.run(`\n        MATCH (father:Person)\n        WHERE id(father) = $fatherId\n        OPTIONAL MATCH (father)-[:FATHER_OF]->(child:Person)\n        RETURN father, collect(child) AS children\n        `, {\n        fatherId\n      });\n      if (result.records.length > 0) {\n        const record = result.records[0];\n        const fatherNode = record.get('father');\n        const childrenNodes = record.get('children');\n        const father = {\n          id: fatherNode.identity.toNumber(),\n          ...fatherNode.properties\n        };\n        const children = childrenNodes.filter(child => child) // filter out nulls if no children\n        .map(child => ({\n          id: child.identity.toNumber(),\n          ...child.properties\n        }));\n        return {\n          father,\n          children\n        };\n      } else {\n        return null;\n      }\n    } catch (error) {\n      console.error('Error fetching father and children:', error);\n      return null;\n    } finally {\n      await session.close();\n    }\n  };\n  const handleShowChildren = async e => {\n    setTreeVisible(true);\n    e.stopPropagation();\n    const {\n      father,\n      children\n    } = await getChildrenOfFather(personDetails.personID);\n\n    // Transform into correct format for Tree component\n    const formattedData = {\n      id: father.id,\n      name: father.name,\n      children: children.map(child => ({\n        id: child.id,\n        name: child.name\n      }))\n    };\n    setTreeData(formattedData);\n  };\n  const handleSearchChange = e => {\n    setSearchQuery(e.target.value);\n  };\n  const handlePersonSelect = selectedPerson => {\n    // When the user selects a match, update the state to show detailed information about the selected person\n    setPersonDetails({\n      personName: selectedPerson.personName,\n      fatherName: selectedPerson.fatherName,\n      grandfatherName: selectedPerson.grandfatherName,\n      familyName: selectedPerson.familyName,\n      gender: selectedPerson.gender,\n      age: selectedPerson.age // You can calculate the age in the same way as before\n    });\n  };\n  const handleSearchSubmit = async () => {\n    setTreeVisible(false);\n    if (!searchQuery.trim()) {\n      setError('الرجاء إدخال نص للبحث.');\n      setPersonDetails(null);\n      return;\n    }\n    await searchPerson(searchQuery.trim());\n  };\n  const searchPerson = async searchText => {\n    let translatedInputName = translateName(searchText, false);\n    console.log(translatedInputName);\n    const {\n      personName,\n      fatherName,\n      grandfatherName,\n      familyName\n    } = splitName(translatedInputName);\n    let cypherQuery = ``;\n    const queryParamsObject = {};\n    if (personName) {\n      console.log(`Searching for person: ${personName}`);\n      if (fatherName) {\n        console.log(`Searching for father: ${fatherName}`);\n        if (grandfatherName) {\n          console.log(`Searching for grandfather: ${grandfatherName}`);\n          if (familyName) {\n            console.log(`Searching for familyName: ${familyName}`);\n            cypherQuery += `\n              MATCH (grandfather:Person)-[:FATHER_OF]->(father:Person)-[:FATHER_OF]->(child:Person)\n              WHERE child.name = $personName AND \n                    father.name = $fatherName AND \n                    grandfather.name = $grandfatherName AND \n                    child.lastName = $familyName\n              RETURN child.name AS childName, father.name AS fatherName, grandfather.name AS grandfatherName, child.lastName AS familyName,  \n              child.YoB AS childYoB, child.gender AS childGender, id(child) AS childID,\n              child.isAlive AS lifeStatus, child.YoD AS YoD\n            `;\n            queryParamsObject.personName = personName;\n            queryParamsObject.fatherName = fatherName;\n            queryParamsObject.grandfatherName = grandfatherName;\n            queryParamsObject.familyName = familyName;\n          } else {\n            console.log(\"No familyName provided.\");\n            cypherQuery += `\n              MATCH (grandfather:Person)-[:FATHER_OF]->(father:Person)-[:FATHER_OF]->(child:Person)\n              WHERE child.name = $personName AND \n                    father.name = $fatherName AND \n                    grandfather.name = $grandfatherName\n              RETURN child.name AS childName, father.name AS fatherName, grandfather.name AS grandfatherName, \n              child.YoB AS childYoB, child.gender AS childGender, id(child) AS childID, child.isAlive AS lifeStatus, child.YoD AS YoD`;\n            queryParamsObject.personName = personName;\n            queryParamsObject.fatherName = fatherName;\n            queryParamsObject.grandfatherName = grandfatherName;\n          }\n        } else {\n          console.log(\"No grandfatherName provided.\");\n          if (familyName) {\n            cypherQuery += `\n            MATCH (father:Person)-[:FATHER_OF]->(child:Person)\n            WHERE child.name = $personName AND \n                  father.name = $fatherName AND\n                  child.lastName = $familyName\n            OPTIONAL MATCH (grandfather:Person)-[:FATHER_OF]->(father)\n            RETURN child.name AS childName, \n                  father.name AS fatherName,\n                  grandfather.name as grandfatherName,\n                  child.lastName AS familyName,\n                  child.YoB AS childYoB, \n                  child.gender AS childGender, \n                  id(child) AS childID,\n                  child.isAlive AS lifeStatus, \n                  child.YoD AS YoD\n            `;\n            queryParamsObject.personName = personName;\n            queryParamsObject.fatherName = fatherName;\n            queryParamsObject.familyName = familyName;\n          } else {\n            cypherQuery += `\n            MATCH (father:Person)-[:FATHER_OF]->(child:Person)\n            WHERE child.name = $personName AND \n                  father.name = $fatherName AND\n            RETURN child.name AS childName, father.name AS fatherName, \n                   child.YoB AS childYoB, child.gender AS childGender, \n                   id(child) AS childID, child.isAlive AS lifeStatus,\n                   child.YoD AS YoD\n            `;\n            queryParamsObject.personName = personName;\n            queryParamsObject.fatherName = fatherName;\n          }\n        }\n      } else {\n        if (familyName) {\n          cypherQuery += `\n          MATCH (child:Person)\n          WHERE child.name = $personName AND child.lastName = $familyName\n          OPTIONAL MATCH (father:Person)-[:FATHER_OF]->(child)\n          OPTIONAL MATCH (grandfather:Person)-[:FATHER_OF]->(father)\n          RETURN \n            child.name AS childName, \n            father.name AS fatherName,\n            grandfather.name AS grandfatherName,\n            child.lastName AS familyName,\n            child.YoB AS childYoB, \n            child.gender AS childGender, \n            id(child) AS childID,\n            child.isAlive AS lifeStatus,\n            child.YoD AS YoD\n        `;\n          queryParamsObject.personName = personName;\n          queryParamsObject.familyName = familyName;\n        } else {\n          console.log(\"No fatherName provided.\");\n          cypherQuery += `\n            MATCH (child:Person)\n            WHERE child.name = $personName\n            OPTIONAL MATCH (father:Person)-[:FATHER_OF]->(child)\n            OPTIONAL MATCH (grandfather:Person)-[:FATHER_OF]->(father)\n            RETURN child.name AS childName, \n                  child.YoB AS childYoB, \n                  child.gender AS childGender,\n                  father.name AS fatherName, \n                  grandfather.name AS grandfatherName,\n                   child.lastName AS familyName,\n                  id(child) AS childID,\n                  child.isAlive AS lifeStatus,\n                  child.YoD AS YoD\n\n          `;\n          queryParamsObject.personName = personName;\n        }\n      }\n    }\n    const session = driver.session();\n    try {\n      const result = await session.run(cypherQuery, queryParamsObject);\n      if (result.records.length === 0) {\n        setError('هذا الشخص ليس مسجل في الشجرة.');\n        setPersonDetails(null);\n        return;\n      } else if (result.records.length === 1) {\n        var _record$get, _isMarried$records$0$, _isMarried$records$, _childrenCountRecord$, _childrenCountRecord$2, _childrenCountRecord$3;\n        const record = result.records[0];\n        let age;\n        let YoB = record.get('childYoB');\n        let YoD = record.get('YoD');\n        if (YoB == null) {\n          age = -1;\n        } else {\n          age = new Date().getFullYear() - YoB;\n        }\n        const childID = record.get(\"childID\").toNumber();\n        const motherQuery = await session.run(`\n          OPTIONAL MATCH (mother:Person)-[:MOTHER_OF]->(child:Person)\n          WHERE id(child) = $childID\n          OPTIONAL MATCH (motherFather)-[:FATHER_OF]->(mother:Person)\n          OPTIONAL MATCH (motherGrandFather)-[:FATHER_OF]->(motherFather:Person)\n          RETURN \n            mother.name AS motherName,\n            motherFather.name AS motherFatherName,\n            motherGrandFather.name AS motherGrandFatherName,\n            mother.lastName AS motherFamilyName\n        `, {\n          childID\n        });\n        const motherResult = motherQuery.records[0];\n        const childrenCountRecord = await session.run(`\n          MATCH (p:Person)-[:FATHER_OF|MOTHER_OF]->(child:Person)\n          WHERE id(p) = $childID\n          RETURN count(child) AS childrenCount\n        `, {\n          childID\n        });\n        const isMarried = await session.run(`\n          MATCH (m:Person)-[r:HUSBAND_OF]->(w:Person)\n          WHERE id(m) = $childID\n          RETURN count(r) > 0 AS isMarried\n        `, {\n          childID\n        });\n        const personDetails = {\n          personID: childID,\n          personName: (_record$get = record.get('childName')) !== null && _record$get !== void 0 ? _record$get : \"غير متوفر\",\n          fatherName: record.has('fatherName') ? record.get('fatherName') : \"غير متوفر\",\n          grandfatherName: record.has('grandfatherName') ? record.get('grandfatherName') : \"غير متوفر\",\n          familyName: record.has('familyName') ? record.get('familyName') : \"غير متوفر\",\n          gender: record.has('childGender') ? record.get('childGender') : \"غير متوفر\",\n          age,\n          YoD,\n          motherName: motherResult.has('motherName') ? motherResult.get('motherName') : \"غير متوفر\",\n          motherFatherName: motherResult.has('motherFatherName') ? motherResult.get('motherFatherName') : \"غير متوفر\",\n          // Check if motherFatherName exists\n          motherGrandFatherName: motherResult.has('motherGrandfatherName') ? motherResult.get('motherGrandfatherName') : \"غير متوفر\",\n          // Check if motherGrandfatherName exists\n          motherFamilyName: motherResult.has('motherFamilyName') ? motherResult.get('motherFamilyName') : \"غير متوفر\",\n          // Check if motherFamilyName exists\n\n          lifeStatus: record.has('lifeStatus') ? record.get('lifeStatus') : \"غير متوفر\",\n          // Check if lifeStatus exists\n          martialStatus: (_isMarried$records$0$ = (_isMarried$records$ = isMarried.records[0]) === null || _isMarried$records$ === void 0 ? void 0 : _isMarried$records$.get('isMarried')) !== null && _isMarried$records$0$ !== void 0 ? _isMarried$records$0$ : \"غير متوفر\",\n          // Safe access for marital status\n          childrenCount: (_childrenCountRecord$ = (_childrenCountRecord$2 = childrenCountRecord.records[0]) === null || _childrenCountRecord$2 === void 0 ? void 0 : (_childrenCountRecord$3 = _childrenCountRecord$2.get('childrenCount')) === null || _childrenCountRecord$3 === void 0 ? void 0 : _childrenCountRecord$3.toInt()) !== null && _childrenCountRecord$ !== void 0 ? _childrenCountRecord$ : 0 // Default to 0 if missing\n        };\n        setPersonDetails(personDetails);\n        setError('');\n      } else if (result.records.length >= 2) {\n        const multipleMatches = result.records.map(record => ({\n          personName: record.get('childName'),\n          fatherName: record.has('fatherName') ? record.get('fatherName') : \"غير متوفر\",\n          // Check for fatherName\n          grandfatherName: record.has('grandfatherName') ? record.get('grandfatherName') : \"غير متوفر\",\n          // Check for grandfatherName\n          familyName: record.has('familyName') ? record.get('familyName') : \"غير متوفر\" // Check for familyName\n        }));\n        setPersonDetails({\n          multipleMatches\n        });\n        setError('هناك العديد من الأشخاص يحملون نفس الاسم. الرجاء اختيار الشخص الصحيح.');\n      } else {\n        setPersonDetails(null);\n        setError('لم يتم العثور على شخص مطابق.');\n      }\n    } catch (err) {\n      console.error('Query Error:', err);\n      setError('حدث خطأ أثناء البحث.');\n      setPersonDetails(null);\n    } finally {\n      await session.close();\n    }\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"search-page\",\n    children: [/*#__PURE__*/_jsxDEV(\"header\", {\n      className: \"search-header\",\n      children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n        children: \"\\u0627\\u0628\\u062D\\u062B \\u0639\\u0646 \\u0634\\u062E\\u0635 \\u0641\\u064A \\u0634\\u062C\\u0631\\u0629 \\u0627\\u0644\\u0639\\u0627\\u0626\\u0644\\u0629\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 383,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n        type: \"text\",\n        className: \"search-bar\",\n        placeholder: \"\\u0627\\u062F\\u062E\\u0644 \\u0627\\u0644\\u0627\\u0633\\u0645 \\u0627\\u0644\\u062B\\u0644\\u0627\\u062B\\u064A \\u0623\\u0648 \\u0627\\u0644\\u0631\\u0628\\u0627\\u0639\\u064A...\",\n        value: searchQuery,\n        onChange: handleSearchChange\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 384,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        className: \"search-button\",\n        onClick: handleSearchSubmit,\n        children: \"\\u0627\\u0628\\u062D\\u062B\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 391,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 382,\n      columnNumber: 7\n    }, this), error && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"error-message\",\n      children: error\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 394,\n      columnNumber: 17\n    }, this), personDetails && personDetails.multipleMatches ? /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"multiple-matches\",\n      children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n        children: \"\\u0646\\u062A\\u0627\\u0626\\u062C \\u0645\\u062A\\u0639\\u062F\\u062F\\u0629:\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 398,\n        columnNumber: 5\n      }, this), personDetails.multipleMatches.map((person, index) => /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"match-item\",\n        onClick: () => handlePersonSelect(person),\n        style: {\n          cursor: 'pointer'\n        },\n        children: [/*#__PURE__*/_jsxDEV(\"p\", {\n          children: /*#__PURE__*/_jsxDEV(\"p\", {\n            className: \"dupPersonName\",\n            children: [index + 1, \"- \", translateName(person.personName), \" \\u0628\\u0646 \", translateName(person.fatherName), \" \\u0628\\u0646 \", translateName(person.grandfatherName), \" \", translateName(person.familyName)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 406,\n            columnNumber: 12\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 406,\n          columnNumber: 9\n        }, this), /*#__PURE__*/_jsxDEV(\"hr\", {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 407,\n          columnNumber: 9\n        }, this)]\n      }, index, true, {\n        fileName: _jsxFileName,\n        lineNumber: 400,\n        columnNumber: 7\n      }, this))]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 397,\n      columnNumber: 3\n    }, this) : personDetails ? /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"person-details\",\n      children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n        children: \"\\u062A\\u0641\\u0627\\u0635\\u064A\\u0644 \\u0627\\u0644\\u0634\\u062E\\u0635 :\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 413,\n        columnNumber: 5\n      }, this), /*#__PURE__*/_jsxDEV(\"h3\", {\n        children: [translateName((_personDetails$person = personDetails === null || personDetails === void 0 ? void 0 : personDetails.personName) !== null && _personDetails$person !== void 0 ? _personDetails$person : \"غير معروف\"), personDetails !== null && personDetails !== void 0 && personDetails.fatherName ? ` بن ${translateName(personDetails.fatherName)}` : '', personDetails !== null && personDetails !== void 0 && personDetails.grandfatherName ? ` بن ${translateName(personDetails.grandfatherName)}` : '', personDetails !== null && personDetails !== void 0 && personDetails.familyName ? ` ${translateName(personDetails.familyName)}` : '']\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 414,\n        columnNumber: 5\n      }, this), /*#__PURE__*/_jsxDEV(\"table\", {\n        className: \"person-details-table\",\n        children: [/*#__PURE__*/_jsxDEV(\"thead\", {\n          children: /*#__PURE__*/_jsxDEV(\"tr\", {\n            children: [/*#__PURE__*/_jsxDEV(\"th\", {\n              className: \"blankHeader\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 423,\n              columnNumber: 11\n            }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n              children: \"\\u0627\\u0644\\u0625\\u0633\\u0645\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 424,\n              columnNumber: 11\n            }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n              children: \"\\u0625\\u0633\\u0645 \\u0627\\u0644\\u0623\\u0628\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 425,\n              columnNumber: 11\n            }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n              children: \"\\u0625\\u0633\\u0645 \\u0627\\u0644\\u062C\\u0651\\u062F\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 426,\n              columnNumber: 11\n            }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n              children: \"\\u0625\\u0633\\u0645 \\u0627\\u0644\\u0639\\u0627\\u0626\\u0644\\u0629 / \\u0627\\u0644\\u0644\\u0642\\u0628\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 427,\n              columnNumber: 11\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 422,\n            columnNumber: 9\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 421,\n          columnNumber: 7\n        }, this), /*#__PURE__*/_jsxDEV(\"tbody\", {\n          children: [/*#__PURE__*/_jsxDEV(\"tr\", {\n            children: [/*#__PURE__*/_jsxDEV(\"td\", {\n              children: /*#__PURE__*/_jsxDEV(\"strong\", {\n                children: \"\\u0627\\u0644\\u0634\\u062E\\u0635\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 432,\n                columnNumber: 15\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 432,\n              columnNumber: 11\n            }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n              children: /*#__PURE__*/_jsxDEV(\"p\", {\n                className: \"personDetails\",\n                children: translateName((_personDetails$person2 = personDetails === null || personDetails === void 0 ? void 0 : personDetails.personName) !== null && _personDetails$person2 !== void 0 ? _personDetails$person2 : '') || 'غير متوفر'\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 433,\n                columnNumber: 15\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 433,\n              columnNumber: 11\n            }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n              children: /*#__PURE__*/_jsxDEV(\"p\", {\n                className: \"personDetails\",\n                children: translateName((_personDetails$father = personDetails === null || personDetails === void 0 ? void 0 : personDetails.fatherName) !== null && _personDetails$father !== void 0 ? _personDetails$father : '') || 'غير متوفر'\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 434,\n                columnNumber: 15\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 434,\n              columnNumber: 11\n            }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n              children: /*#__PURE__*/_jsxDEV(\"p\", {\n                className: \"personDetails\",\n                children: translateName((_personDetails$grandf = personDetails === null || personDetails === void 0 ? void 0 : personDetails.grandfatherName) !== null && _personDetails$grandf !== void 0 ? _personDetails$grandf : '') || 'غير متوفر'\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 435,\n                columnNumber: 15\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 435,\n              columnNumber: 11\n            }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n              children: /*#__PURE__*/_jsxDEV(\"p\", {\n                className: \"personDetails\",\n                children: translateName((_personDetails$family = personDetails === null || personDetails === void 0 ? void 0 : personDetails.familyName) !== null && _personDetails$family !== void 0 ? _personDetails$family : '') || 'غير متوفر'\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 436,\n                columnNumber: 15\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 436,\n              columnNumber: 11\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 431,\n            columnNumber: 9\n          }, this), /*#__PURE__*/_jsxDEV(\"tr\", {\n            children: [/*#__PURE__*/_jsxDEV(\"td\", {\n              children: /*#__PURE__*/_jsxDEV(\"strong\", {\n                children: \"\\u0627\\u0644\\u0623\\u0645\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 439,\n                columnNumber: 15\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 439,\n              columnNumber: 11\n            }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n              children: /*#__PURE__*/_jsxDEV(\"p\", {\n                className: \"personDetails\",\n                children: translateName((_personDetails$mother = personDetails === null || personDetails === void 0 ? void 0 : personDetails.motherName) !== null && _personDetails$mother !== void 0 ? _personDetails$mother : '') || 'غير متوفر'\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 440,\n                columnNumber: 15\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 440,\n              columnNumber: 11\n            }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n              children: /*#__PURE__*/_jsxDEV(\"p\", {\n                className: \"personDetails\",\n                children: translateName((_personDetails$mother2 = personDetails === null || personDetails === void 0 ? void 0 : personDetails.motherFatherName) !== null && _personDetails$mother2 !== void 0 ? _personDetails$mother2 : '') || 'غير متوفر'\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 441,\n                columnNumber: 15\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 441,\n              columnNumber: 11\n            }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n              children: /*#__PURE__*/_jsxDEV(\"p\", {\n                className: \"personDetails\",\n                children: translateName((_personDetails$mother3 = personDetails === null || personDetails === void 0 ? void 0 : personDetails.motherGrandFatherName) !== null && _personDetails$mother3 !== void 0 ? _personDetails$mother3 : '') || 'غير متوفر'\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 442,\n                columnNumber: 15\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 442,\n              columnNumber: 11\n            }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n              children: /*#__PURE__*/_jsxDEV(\"p\", {\n                className: \"personDetails\",\n                children: translateName((_personDetails$mother4 = personDetails === null || personDetails === void 0 ? void 0 : personDetails.motherFamilyName) !== null && _personDetails$mother4 !== void 0 ? _personDetails$mother4 : '') || 'غير متوفر'\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 443,\n                columnNumber: 15\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 443,\n              columnNumber: 11\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 438,\n            columnNumber: 9\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 430,\n          columnNumber: 7\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 420,\n        columnNumber: 5\n      }, this), /*#__PURE__*/_jsxDEV(\"table\", {\n        className: \"person-details2-table\",\n        children: [/*#__PURE__*/_jsxDEV(\"thead\", {\n          children: /*#__PURE__*/_jsxDEV(\"tr\", {\n            children: [/*#__PURE__*/_jsxDEV(\"th\", {\n              children: \"\\u0627\\u0644\\u062C\\u0646\\u0633\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 450,\n              columnNumber: 11\n            }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n              children: \"\\u0627\\u0644\\u0639\\u0645\\u0631\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 451,\n              columnNumber: 11\n            }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n              children: \"\\u0627\\u0644\\u062D\\u0627\\u0644\\u0629 \\u0627\\u0644\\u0645\\u062F\\u0646\\u064A\\u0629\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 452,\n              columnNumber: 11\n            }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n              children: \"\\u062D\\u0627\\u0644\\u0629 \\u0627\\u0644\\u062D\\u064A\\u0627\\u0629\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 453,\n              columnNumber: 11\n            }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n              children: \"\\u0639\\u062F\\u062F \\u0627\\u0644\\u0623\\u0637\\u0641\\u0627\\u0644\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 454,\n              columnNumber: 11\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 449,\n            columnNumber: 9\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 448,\n          columnNumber: 7\n        }, this), /*#__PURE__*/_jsxDEV(\"tbody\", {\n          children: /*#__PURE__*/_jsxDEV(\"tr\", {\n            children: [/*#__PURE__*/_jsxDEV(\"td\", {\n              children: personDetails.gender === 'Male' ? 'ذكر 👨' : 'أنثى 👩'\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 459,\n              columnNumber: 11\n            }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n              children: personDetails.lifeStatus === true ?\n              // Person is alive, display age\n              personDetails.age === 1 ? `سنة واحدة (مواليد ${new Date().getFullYear() - personDetails.age})` : personDetails.age === 2 ? `سنتان (مواليد ${new Date().getFullYear() - personDetails.age})` : personDetails.age >= 3 && personDetails.age <= 10 ? `${personDetails.age} سنوات (مواليد ${new Date().getFullYear() - personDetails.age})` : `${personDetails.age} سنة (مواليد ${new Date().getFullYear() - personDetails.age})` :\n              // Person is deceased\n              personDetails.hasOwnProperty('YoD') && personDetails.YoD ?\n              // If YoD exists, calculate age at the time of death\n              personDetails.YoD !== 'غير متوفر' ? `عمره عند الوفاة: ${personDetails.YoD - personDetails.dateOfBirth} سنة` : `العمر عند الوفاة غير متوفر (مواليد ${new Date().getFullYear() - personDetails.age})` :\n              // If YoD is not available, show that age is known with YoB\n              `العمر معروف (مواليد ${new Date().getFullYear() - personDetails.age})`\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 460,\n              columnNumber: 11\n            }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n              children: personDetails.martialStatus === true ? personDetails.gender === 'Male' ? 'متزوج' : 'متزوجة' : personDetails.gender === 'Male' ? 'أعزب' : 'عزباء'\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 482,\n              columnNumber: 11\n            }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n              children: personDetails.lifeStatus === true ? personDetails.gender === 'Male' ? 'حي' : 'حية' : personDetails.gender === 'Male' ? 'متوفى' : 'متوفية'\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 487,\n              columnNumber: 11\n            }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n              children: /*#__PURE__*/_jsxDEV(\"button\", {\n                id: \"childrenButton\",\n                onClick: handleShowChildren,\n                children: personDetails.childrenCount === 0 || personDetails.childrenCount == null ? 'ليس لديه أطفال' : personDetails.childrenCount === 1 ? 'طفل واحد' : personDetails.childrenCount === 2 ? 'طفلان' : personDetails.childrenCount >= 3 && personDetails.childrenCount <= 10 ? `${personDetails.childrenCount} أطفال` : `${personDetails.childrenCount} طفلا`\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 493,\n                columnNumber: 9\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 492,\n              columnNumber: 9\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 458,\n            columnNumber: 9\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 457,\n          columnNumber: 7\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 447,\n        columnNumber: 5\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"tree-wrapper\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"titleTree\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 512,\n          columnNumber: 9\n        }, this), treeData && /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"tree-container\",\n          children: /*#__PURE__*/_jsxDEV(Tree, {\n            data: treeData,\n            orientation: \"vertical\",\n            pathFunc: \"step\",\n            nodeSize: {\n              x: 60,\n              y: 100\n            },\n            separation: {\n              siblings: 2,\n              nonSiblings: 2\n            },\n            translate: {\n              x: 325,\n              y: 27\n            },\n            scaleExtent: {\n              min: 1,\n              max: 1\n            } // Disable zooming\n            ,\n            renderCustomNodeElement: ({\n              nodeDatum\n            }) => /*#__PURE__*/_jsxDEV(\"g\", {\n              className: \"tree-node\",\n              children: [/*#__PURE__*/_jsxDEV(\"title\", {\n                children: nodeDatum.id\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 528,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"rect\", {\n                className: \"tree-node-rect\",\n                x: \"-50\",\n                y: \"-20\",\n                width: \"100\",\n                height: \"40\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 529,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"text\", {\n                className: \"tree-node-text\",\n                x: \"0\",\n                y: \"5\",\n                children: translateName(nodeDatum.name)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 536,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 527,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 518,\n            columnNumber: 11\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 517,\n          columnNumber: 9\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 511,\n        columnNumber: 5\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 412,\n      columnNumber: 3\n    }, this) : /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"no-results\",\n      children: /*#__PURE__*/_jsxDEV(\"p\", {\n        children: \"\\u0644\\u0627 \\u062A\\u0648\\u062C\\u062F \\u0646\\u062A\\u0627\\u0626\\u062C \\u0644\\u0644\\u0628\\u062D\\u062B.\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 550,\n        columnNumber: 5\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 549,\n      columnNumber: 3\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 553,\n      columnNumber: 3\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 381,\n    columnNumber: 5\n  }, this);\n};\n_s(SearchPage, \"cdx/isFKxbHmrobkFpNRX6hLLGw=\");\n_c = SearchPage;\nexport default SearchPage;\nvar _c;\n$RefreshReg$(_c, \"SearchPage\");","map":{"version":3,"names":["React","useState","useEffect","Tree","jsxDEV","_jsxDEV","translations","require","config","neo4jURI","process","env","REACT_APP_NEO4J_URI","neo4jUser","REACT_APP_NEO4J_USER","neo4jPassword","REACT_APP_NEO4J_PASSWORD","driver","auth","basic","translateName","fullName","language","nameParts","split","reverseTranslations","Object","fromEntries","entries","map","key","value","dict","translatedParts","part","join","splitName","parts","replace","length","personName","fatherName","grandfatherName","familyName","SearchPage","_s","_personDetails$person","_personDetails$person2","_personDetails$father","_personDetails$grandf","_personDetails$family","_personDetails$mother","_personDetails$mother2","_personDetails$mother3","_personDetails$mother4","treeVisible","setTreeVisible","searchQuery","setSearchQuery","personDetails","setPersonDetails","treeData","setTreeData","error","setError","getChildrenOfFather","fatherId","session","result","run","records","record","fatherNode","get","childrenNodes","father","id","identity","toNumber","properties","children","filter","child","console","close","handleShowChildren","e","stopPropagation","personID","formattedData","name","handleSearchChange","target","handlePersonSelect","selectedPerson","gender","age","handleSearchSubmit","trim","searchPerson","searchText","translatedInputName","log","cypherQuery","queryParamsObject","_record$get","_isMarried$records$0$","_isMarried$records$","_childrenCountRecord$","_childrenCountRecord$2","_childrenCountRecord$3","YoB","YoD","Date","getFullYear","childID","motherQuery","motherResult","childrenCountRecord","isMarried","has","motherName","motherFatherName","motherGrandFatherName","motherFamilyName","lifeStatus","martialStatus","childrenCount","toInt","multipleMatches","err","className","fileName","_jsxFileName","lineNumber","columnNumber","type","placeholder","onChange","onClick","person","index","style","cursor","hasOwnProperty","dateOfBirth","data","orientation","pathFunc","nodeSize","x","y","separation","siblings","nonSiblings","translate","scaleExtent","min","max","renderCustomNodeElement","nodeDatum","width","height","_c","$RefreshReg$"],"sources":["D:/Study/Projects/El-Kasr Family Tree/client/src/components/SearchPage.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport \"./SearchPage.css\"\r\nimport Tree from 'react-d3-tree';\r\nconst translations = require('./translation.json');\r\nrequire('dotenv').config();\r\n\r\nconst neo4jURI = process.env.REACT_APP_NEO4J_URI;\r\nconst neo4jUser = process.env.REACT_APP_NEO4J_USER;\r\nconst neo4jPassword = process.env.REACT_APP_NEO4J_PASSWORD;\r\n\r\nconst driver = require('neo4j-driver').driver(\r\n    neo4jURI,\r\n    require('neo4j-driver').auth.basic(neo4jUser, neo4jPassword)\r\n);\r\nexport const translateName = (fullName, language = true) => {\r\n  const nameParts = fullName.split(' ');\r\n\r\nconst reverseTranslations = Object.fromEntries(\r\n  Object.entries(translations).map(([key, value]) => [value, key])\r\n);\r\n\r\n  const dict = language ? translations : reverseTranslations;\r\n\r\n  const translatedParts = nameParts.map(part => dict[part] || part);\r\n\r\n  return translatedParts.join(' ');\r\n};\r\n\r\nfunction splitName(fullName) {\r\n  const parts = fullName.replace(/ ben /gi, ' ').split(/\\s+/);\r\n  if (parts.length === 2) {\r\n    return {\r\n      personName: parts[0],\r\n      fatherName: \"\",\r\n      grandfatherName: \"\",\r\n      familyName: parts[1]\r\n    };\r\n  } else if (parts.length === 3) {\r\n    return {\r\n      personName: parts[0],\r\n      fatherName: parts[1],\r\n      grandfatherName: \"\",\r\n      familyName: parts[2]\r\n    };\r\n  } else if (parts.length === 4) {\r\n    return {\r\n      personName: parts[0],\r\n      fatherName: parts[1],\r\n      grandfatherName: parts[2],\r\n      familyName: parts[3]\r\n    };\r\n  }\r\n  // Default case if structure doesn't match\r\n  return { personName: parts[0], fatherName: \"\", grandfatherName: \"\", familyName: parts[1] };\r\n}\r\n\r\n\r\nconst SearchPage = () => {\r\n  const [treeVisible, setTreeVisible] = useState(false);\r\n  const [searchQuery, setSearchQuery] = useState('');\r\n  const [personDetails, setPersonDetails] = useState(null);\r\n  const [treeData, setTreeData] = useState(null);\r\n  const [error, setError] = useState('');\r\n  \r\n  const getChildrenOfFather = async (fatherId) => {\r\n    const session = driver.session();\r\n    try {\r\n      const result = await session.run(\r\n        `\r\n        MATCH (father:Person)\r\n        WHERE id(father) = $fatherId\r\n        OPTIONAL MATCH (father)-[:FATHER_OF]->(child:Person)\r\n        RETURN father, collect(child) AS children\r\n        `,\r\n        { fatherId }\r\n      );\r\n  \r\n      if (result.records.length > 0) {\r\n        const record = result.records[0];\r\n        const fatherNode = record.get('father');\r\n        const childrenNodes = record.get('children');\r\n  \r\n        const father = {\r\n          id: fatherNode.identity.toNumber(),\r\n          ...fatherNode.properties,\r\n        };\r\n  \r\n        const children = childrenNodes\r\n          .filter(child => child) // filter out nulls if no children\r\n          .map(child => ({\r\n            id: child.identity.toNumber(),\r\n            ...child.properties,\r\n          }));\r\n  \r\n        return { father, children };\r\n      } else {\r\n        return null;\r\n      }\r\n    } catch (error) {\r\n      console.error('Error fetching father and children:', error);\r\n      return null;\r\n    } finally {\r\n      await session.close();\r\n    }\r\n  };\r\n  \r\n  const handleShowChildren = async (e) => {\r\n    setTreeVisible(true);\r\n    e.stopPropagation();\r\n    const { father, children } = await getChildrenOfFather(personDetails.personID);\r\n  \r\n    // Transform into correct format for Tree component\r\n    const formattedData = {\r\n      id: father.id,\r\n      name: father.name,\r\n      children: children.map(child => ({\r\n        id: child.id,\r\n        name: child.name\r\n      }))\r\n    };\r\n  \r\n    setTreeData(formattedData);\r\n    \r\n  };\r\n\r\n  const handleSearchChange = (e) => {\r\n    setSearchQuery(e.target.value);\r\n  };\r\n\r\n  const handlePersonSelect = (selectedPerson) => {\r\n    // When the user selects a match, update the state to show detailed information about the selected person\r\n    setPersonDetails({\r\n      personName: selectedPerson.personName,\r\n      fatherName: selectedPerson.fatherName,\r\n      grandfatherName: selectedPerson.grandfatherName,\r\n      familyName: selectedPerson.familyName,\r\n      gender: selectedPerson.gender,\r\n      age: selectedPerson.age,  // You can calculate the age in the same way as before\r\n    });\r\n  };\r\n\r\n  const handleSearchSubmit = async () => {\r\n    setTreeVisible(false);\r\n    if (!searchQuery.trim()) {\r\n      setError('الرجاء إدخال نص للبحث.');\r\n      setPersonDetails(null);\r\n      return;\r\n    }\r\n    await searchPerson(searchQuery.trim());\r\n  };\r\n\r\n  const searchPerson = async (searchText) => {\r\n    let translatedInputName = translateName(searchText, false);\r\n    console.log(translatedInputName);\r\n    const { personName, fatherName, grandfatherName, familyName } = splitName(translatedInputName);\r\n\r\n    let cypherQuery = ``;\r\n\r\n    const queryParamsObject = {};\r\n\r\n    if (personName){\r\n      console.log(`Searching for person: ${personName}`);\r\n      \r\n      if (fatherName) {\r\n        console.log(`Searching for father: ${fatherName}`);\r\n        \r\n        if (grandfatherName) {\r\n          console.log(`Searching for grandfather: ${grandfatherName}`);\r\n          \r\n          if (familyName) {\r\n            console.log(`Searching for familyName: ${familyName}`);\r\n            \r\n            cypherQuery += `\r\n              MATCH (grandfather:Person)-[:FATHER_OF]->(father:Person)-[:FATHER_OF]->(child:Person)\r\n              WHERE child.name = $personName AND \r\n                    father.name = $fatherName AND \r\n                    grandfather.name = $grandfatherName AND \r\n                    child.lastName = $familyName\r\n              RETURN child.name AS childName, father.name AS fatherName, grandfather.name AS grandfatherName, child.lastName AS familyName,  \r\n              child.YoB AS childYoB, child.gender AS childGender, id(child) AS childID,\r\n              child.isAlive AS lifeStatus, child.YoD AS YoD\r\n            `;\r\n            \r\n            queryParamsObject.personName = personName;\r\n            queryParamsObject.fatherName = fatherName;\r\n            queryParamsObject.grandfatherName = grandfatherName;\r\n            queryParamsObject.familyName = familyName;\r\n            \r\n          } \r\n          else {\r\n            console.log(\"No familyName provided.\");\r\n            cypherQuery += `\r\n              MATCH (grandfather:Person)-[:FATHER_OF]->(father:Person)-[:FATHER_OF]->(child:Person)\r\n              WHERE child.name = $personName AND \r\n                    father.name = $fatherName AND \r\n                    grandfather.name = $grandfatherName\r\n              RETURN child.name AS childName, father.name AS fatherName, grandfather.name AS grandfatherName, \r\n              child.YoB AS childYoB, child.gender AS childGender, id(child) AS childID, child.isAlive AS lifeStatus, child.YoD AS YoD`;\r\n            \r\n            queryParamsObject.personName = personName;\r\n            queryParamsObject.fatherName = fatherName;\r\n            queryParamsObject.grandfatherName = grandfatherName;\r\n          }\r\n          \r\n        } else {\r\n          console.log(\"No grandfatherName provided.\");\r\n          if (familyName){\r\n            cypherQuery += `\r\n            MATCH (father:Person)-[:FATHER_OF]->(child:Person)\r\n            WHERE child.name = $personName AND \r\n                  father.name = $fatherName AND\r\n                  child.lastName = $familyName\r\n            OPTIONAL MATCH (grandfather:Person)-[:FATHER_OF]->(father)\r\n            RETURN child.name AS childName, \r\n                  father.name AS fatherName,\r\n                  grandfather.name as grandfatherName,\r\n                  child.lastName AS familyName,\r\n                  child.YoB AS childYoB, \r\n                  child.gender AS childGender, \r\n                  id(child) AS childID,\r\n                  child.isAlive AS lifeStatus, \r\n                  child.YoD AS YoD\r\n            `;\r\n            queryParamsObject.personName = personName;\r\n            queryParamsObject.fatherName = fatherName;\r\n            queryParamsObject.familyName = familyName;\r\n          }\r\n          else{\r\n            cypherQuery += `\r\n            MATCH (father:Person)-[:FATHER_OF]->(child:Person)\r\n            WHERE child.name = $personName AND \r\n                  father.name = $fatherName AND\r\n            RETURN child.name AS childName, father.name AS fatherName, \r\n                   child.YoB AS childYoB, child.gender AS childGender, \r\n                   id(child) AS childID, child.isAlive AS lifeStatus,\r\n                   child.YoD AS YoD\r\n            `;\r\n            queryParamsObject.personName = personName;\r\n            queryParamsObject.fatherName = fatherName;\r\n          }\r\n          }\r\n      }\r\n      else {\r\n        if (familyName){\r\n          cypherQuery += `\r\n          MATCH (child:Person)\r\n          WHERE child.name = $personName AND child.lastName = $familyName\r\n          OPTIONAL MATCH (father:Person)-[:FATHER_OF]->(child)\r\n          OPTIONAL MATCH (grandfather:Person)-[:FATHER_OF]->(father)\r\n          RETURN \r\n            child.name AS childName, \r\n            father.name AS fatherName,\r\n            grandfather.name AS grandfatherName,\r\n            child.lastName AS familyName,\r\n            child.YoB AS childYoB, \r\n            child.gender AS childGender, \r\n            id(child) AS childID,\r\n            child.isAlive AS lifeStatus,\r\n            child.YoD AS YoD\r\n        `;\r\n        queryParamsObject.personName = personName;\r\n        queryParamsObject.familyName = familyName;\r\n        }\r\n        else{\r\n          console.log(\"No fatherName provided.\");\r\n          cypherQuery += `\r\n            MATCH (child:Person)\r\n            WHERE child.name = $personName\r\n            OPTIONAL MATCH (father:Person)-[:FATHER_OF]->(child)\r\n            OPTIONAL MATCH (grandfather:Person)-[:FATHER_OF]->(father)\r\n            RETURN child.name AS childName, \r\n                  child.YoB AS childYoB, \r\n                  child.gender AS childGender,\r\n                  father.name AS fatherName, \r\n                  grandfather.name AS grandfatherName,\r\n                   child.lastName AS familyName,\r\n                  id(child) AS childID,\r\n                  child.isAlive AS lifeStatus,\r\n                  child.YoD AS YoD\r\n\r\n          `;\r\n          queryParamsObject.personName = personName;\r\n        }\r\n      }\r\n    }\r\n    \r\n    const session = driver.session();\r\n    try {\r\n      const result = await session.run(cypherQuery, queryParamsObject);\r\n      if (result.records.length === 0) {\r\n        setError('هذا الشخص ليس مسجل في الشجرة.');\r\n        setPersonDetails(null);\r\n        return;\r\n      }\r\n      else if (result.records.length === 1) {\r\n        const record = result.records[0];\r\n        let age;\r\n        let YoB = record.get('childYoB');\r\n        let YoD = record.get('YoD');\r\n        if (YoB == null){\r\n          age = -1;\r\n        }\r\n        else{\r\n          age = new Date().getFullYear() - YoB;\r\n        }\r\n        \r\n        const childID = record.get(\"childID\").toNumber();\r\n\r\n        const motherQuery = await session.run(`\r\n          OPTIONAL MATCH (mother:Person)-[:MOTHER_OF]->(child:Person)\r\n          WHERE id(child) = $childID\r\n          OPTIONAL MATCH (motherFather)-[:FATHER_OF]->(mother:Person)\r\n          OPTIONAL MATCH (motherGrandFather)-[:FATHER_OF]->(motherFather:Person)\r\n          RETURN \r\n            mother.name AS motherName,\r\n            motherFather.name AS motherFatherName,\r\n            motherGrandFather.name AS motherGrandFatherName,\r\n            mother.lastName AS motherFamilyName\r\n        `, {childID});\r\n        const motherResult = motherQuery.records[0];\r\n\r\n        const childrenCountRecord = await session.run(`\r\n          MATCH (p:Person)-[:FATHER_OF|MOTHER_OF]->(child:Person)\r\n          WHERE id(p) = $childID\r\n          RETURN count(child) AS childrenCount\r\n        `, { childID });\r\n    \r\n        const isMarried = await session.run(`\r\n          MATCH (m:Person)-[r:HUSBAND_OF]->(w:Person)\r\n          WHERE id(m) = $childID\r\n          RETURN count(r) > 0 AS isMarried\r\n        `, { childID });\r\n        const personDetails = {\r\n          personID: childID,\r\n          personName: record.get('childName') ?? \"غير متوفر\",\r\n          fatherName: record.has('fatherName') ? record.get('fatherName') : \"غير متوفر\",\r\n          grandfatherName: record.has('grandfatherName') ? record.get('grandfatherName') : \"غير متوفر\", \r\n          familyName: record.has('familyName') ? record.get('familyName') : \"غير متوفر\", \r\n          gender: record.has('childGender') ? record.get('childGender') : \"غير متوفر\", \r\n          age,\r\n          YoD,\r\n          motherName: motherResult.has('motherName') ? motherResult.get('motherName') : \"غير متوفر\", \r\n          motherFatherName: motherResult.has('motherFatherName') ? motherResult.get('motherFatherName') : \"غير متوفر\", // Check if motherFatherName exists\r\n          motherGrandFatherName: motherResult.has('motherGrandfatherName') ? motherResult.get('motherGrandfatherName') : \"غير متوفر\", // Check if motherGrandfatherName exists\r\n          motherFamilyName: motherResult.has('motherFamilyName') ? motherResult.get('motherFamilyName') : \"غير متوفر\", // Check if motherFamilyName exists\r\n          \r\n          lifeStatus: record.has('lifeStatus') ? record.get('lifeStatus') : \"غير متوفر\", // Check if lifeStatus exists\r\n          martialStatus: isMarried.records[0]?.get('isMarried') ?? \"غير متوفر\", // Safe access for marital status\r\n          childrenCount: childrenCountRecord.records[0]?.get('childrenCount')?.toInt() ?? 0 // Default to 0 if missing\r\n        };\r\n    \r\n        setPersonDetails(personDetails);\r\n        setError('');\r\n    \r\n      } else if (result.records.length >= 2) {\r\n        const multipleMatches = result.records.map(record => ({\r\n          personName: record.get('childName'),\r\n          fatherName: record.has('fatherName') ? record.get('fatherName') : \"غير متوفر\", // Check for fatherName\r\n          grandfatherName: record.has('grandfatherName') ? record.get('grandfatherName') : \"غير متوفر\", // Check for grandfatherName\r\n          familyName: record.has('familyName') ? record.get('familyName') : \"غير متوفر\", // Check for familyName\r\n        }));\r\n    \r\n        setPersonDetails({ multipleMatches });\r\n        setError('هناك العديد من الأشخاص يحملون نفس الاسم. الرجاء اختيار الشخص الصحيح.');\r\n    \r\n      } else {\r\n        setPersonDetails(null);\r\n        setError('لم يتم العثور على شخص مطابق.');\r\n      }\r\n    } catch (err) {\r\n      console.error('Query Error:', err);\r\n      setError('حدث خطأ أثناء البحث.');\r\n      setPersonDetails(null);\r\n    } finally {\r\n      await session.close();\r\n    }\r\n    \r\n  };\r\n\r\n  return (\r\n    <div className=\"search-page\">\r\n      <header className=\"search-header\">\r\n        <h1>ابحث عن شخص في شجرة العائلة</h1>\r\n        <input\r\n          type=\"text\"\r\n          className=\"search-bar\"\r\n          placeholder=\"ادخل الاسم الثلاثي أو الرباعي...\"\r\n          value={searchQuery}\r\n          onChange={handleSearchChange}\r\n        />\r\n        <button className=\"search-button\" onClick={handleSearchSubmit}>ابحث</button>\r\n      </header>\r\n\r\n      {error && <div className=\"error-message\">{error}</div>}\r\n\r\n      {personDetails && personDetails.multipleMatches ? (\r\n  <div className=\"multiple-matches\">\r\n    <h2>نتائج متعددة:</h2>\r\n    {personDetails.multipleMatches.map((person, index) => (\r\n      <div \r\n        key={index} \r\n        className=\"match-item\"\r\n        onClick={() => handlePersonSelect(person)}\r\n        style={{ cursor: 'pointer' }}\r\n      >\r\n        <p><p className='dupPersonName'>{index + 1}- {translateName(person.personName)} بن {translateName(person.fatherName)} بن {translateName(person.grandfatherName)} {translateName(person.familyName)}</p></p>\r\n        <hr />\r\n      </div>\r\n    ))}\r\n  </div>\r\n) : personDetails ? (\r\n  <div className=\"person-details\">\r\n    <h2>تفاصيل الشخص :</h2>\r\n    <h3>\r\n    {translateName(personDetails?.personName ?? \"غير معروف\")}\r\n    {personDetails?.fatherName ? ` بن ${translateName(personDetails.fatherName)}` : ''}\r\n    {personDetails?.grandfatherName ? ` بن ${translateName(personDetails.grandfatherName)}` : ''}\r\n    {personDetails?.familyName ? ` ${translateName(personDetails.familyName)}` : ''}    \r\n</h3>\r\n    <table className=\"person-details-table\">\r\n      <thead>\r\n        <tr>\r\n          <th className='blankHeader'></th>\r\n          <th>الإسم</th>\r\n          <th>إسم الأب</th>\r\n          <th>إسم الجّد</th>\r\n          <th>إسم العائلة / اللقب</th>\r\n        </tr>\r\n      </thead>\r\n      <tbody>\r\n        <tr>\r\n          <td><strong>الشخص</strong></td>\r\n          <td><p className='personDetails'>{translateName(personDetails?.personName ?? '') || 'غير متوفر'}</p></td>\r\n          <td><p className='personDetails'>{translateName(personDetails?.fatherName ?? '') || 'غير متوفر'}</p></td>\r\n          <td><p className='personDetails'>{translateName(personDetails?.grandfatherName ?? '') || 'غير متوفر'}</p></td>\r\n          <td><p className='personDetails'>{translateName(personDetails?.familyName ?? '') || 'غير متوفر'}</p></td>\r\n        </tr>\r\n        <tr>\r\n          <td><strong>الأم</strong></td>\r\n          <td><p className='personDetails'>{translateName(personDetails?.motherName ?? '') || 'غير متوفر'}</p></td>\r\n          <td><p className='personDetails'>{translateName(personDetails?.motherFatherName ?? '') || 'غير متوفر'}</p></td>\r\n          <td><p className='personDetails'>{translateName(personDetails?.motherGrandFatherName ?? '') || 'غير متوفر'}</p></td>\r\n          <td><p className='personDetails'>{translateName(personDetails?.motherFamilyName ?? '') || 'غير متوفر'}</p></td>\r\n        </tr>\r\n      </tbody>\r\n    </table>\r\n    <table className=\"person-details2-table\">\r\n      <thead>\r\n        <tr>\r\n          <th>الجنس</th>\r\n          <th>العمر</th>\r\n          <th>الحالة المدنية</th>\r\n          <th>حالة الحياة</th>\r\n          <th>عدد الأطفال</th>\r\n        </tr>\r\n      </thead>\r\n      <tbody>\r\n        <tr>\r\n          <td>{personDetails.gender === 'Male' ? 'ذكر 👨'  : 'أنثى 👩'}</td>\r\n          <td>\r\n            {personDetails.lifeStatus === true\r\n              ? // Person is alive, display age\r\n                (personDetails.age === 1\r\n                  ? `سنة واحدة (مواليد ${new Date().getFullYear() - personDetails.age})`\r\n                  : personDetails.age === 2\r\n                  ? `سنتان (مواليد ${new Date().getFullYear() - personDetails.age})`\r\n                  : personDetails.age >= 3 && personDetails.age <= 10\r\n                  ? `${personDetails.age} سنوات (مواليد ${new Date().getFullYear() - personDetails.age})`\r\n                  : `${personDetails.age} سنة (مواليد ${new Date().getFullYear() - personDetails.age})`)\r\n              : // Person is deceased\r\n                personDetails.hasOwnProperty('YoD') && personDetails.YoD\r\n                ? // If YoD exists, calculate age at the time of death\r\n                  personDetails.YoD !== 'غير متوفر'\r\n                    ? `عمره عند الوفاة: ${personDetails.YoD - personDetails.dateOfBirth} سنة`\r\n                    : `العمر عند الوفاة غير متوفر (مواليد ${new Date().getFullYear() - personDetails.age})`\r\n                : // If YoD is not available, show that age is known with YoB\r\n                  `العمر معروف (مواليد ${new Date().getFullYear() - personDetails.age})`}\r\n          </td>\r\n\r\n\r\n\r\n          <td>\r\n            {personDetails.martialStatus === true\r\n              ? (personDetails.gender === 'Male' ? 'متزوج' : 'متزوجة')\r\n              : (personDetails.gender === 'Male' ? 'أعزب' : 'عزباء')}\r\n          </td>\r\n          <td>\r\n          {personDetails.lifeStatus === true \r\n            ? (personDetails.gender === 'Male' ? 'حي' : 'حية') \r\n            : (personDetails.gender === 'Male' ? 'متوفى' : 'متوفية')}\r\n          </td>\r\n        <td>\r\n        <button id='childrenButton' \r\n        onClick={handleShowChildren}>\r\n          {personDetails.childrenCount === 0 || personDetails.childrenCount == null\r\n            ? 'ليس لديه أطفال'\r\n            : personDetails.childrenCount === 1\r\n            ? 'طفل واحد'\r\n            : personDetails.childrenCount === 2\r\n            ? 'طفلان'\r\n            : personDetails.childrenCount >= 3 && personDetails.childrenCount <= 10\r\n            ? `${personDetails.childrenCount} أطفال`\r\n            : `${personDetails.childrenCount} طفلا`\r\n          }\r\n        </button>\r\n        \r\n      </td>\r\n        </tr>\r\n      </tbody>\r\n    </table>\r\n    <div className=\"tree-wrapper\">\r\n        <div className='titleTree'>\r\n\r\n        </div>\r\n      \r\n      {treeData && (\r\n        <div className=\"tree-container\">\r\n          <Tree\r\n            data={treeData}\r\n            orientation=\"vertical\"\r\n            pathFunc=\"step\"\r\n            nodeSize={{ x: 60, y: 100 }}\r\n            separation={{ siblings: 2, nonSiblings: 2 }}\r\n            translate={{ x: 325, y: 27 }} \r\n            scaleExtent={{ min: 1, max: 1 }} // Disable zooming\r\n            renderCustomNodeElement={({ nodeDatum }) => (\r\n              <g className=\"tree-node\">\r\n                <title>{nodeDatum.id}</title>\r\n                <rect\r\n                  className=\"tree-node-rect\"\r\n                  x=\"-50\"\r\n                  y=\"-20\"\r\n                  width=\"100\"\r\n                  height=\"40\"\r\n                />\r\n                <text className=\"tree-node-text\" x=\"0\" y=\"5\">\r\n                  {translateName(nodeDatum.name)}\r\n                </text>\r\n              </g>\r\n            )}\r\n          />\r\n        </div>\r\n      )}\r\n    </div>\r\n\r\n\r\n  </div>\r\n) : (\r\n  <div className=\"no-results\">\r\n    <p>لا توجد نتائج للبحث.</p>\r\n  </div>\r\n)}\r\n  <div>\r\n    \r\n  </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default SearchPage;\r\n\r\n"],"mappings":";;AAAA,OAAOA,KAAK,IAAIC,QAAQ,EAAEC,SAAS,QAAQ,OAAO;AAClD,OAAO,kBAAkB;AACzB,OAAOC,IAAI,MAAM,eAAe;AAAC,SAAAC,MAAA,IAAAC,OAAA;AACjC,MAAMC,YAAY,GAAGC,OAAO,CAAC,oBAAoB,CAAC;AAClDA,OAAO,CAAC,QAAQ,CAAC,CAACC,MAAM,CAAC,CAAC;AAE1B,MAAMC,QAAQ,GAAGC,OAAO,CAACC,GAAG,CAACC,mBAAmB;AAChD,MAAMC,SAAS,GAAGH,OAAO,CAACC,GAAG,CAACG,oBAAoB;AAClD,MAAMC,aAAa,GAAGL,OAAO,CAACC,GAAG,CAACK,wBAAwB;AAE1D,MAAMC,MAAM,GAAGV,OAAO,CAAC,cAAc,CAAC,CAACU,MAAM,CACzCR,QAAQ,EACRF,OAAO,CAAC,cAAc,CAAC,CAACW,IAAI,CAACC,KAAK,CAACN,SAAS,EAAEE,aAAa,CAC/D,CAAC;AACD,OAAO,MAAMK,aAAa,GAAGA,CAACC,QAAQ,EAAEC,QAAQ,GAAG,IAAI,KAAK;EAC1D,MAAMC,SAAS,GAAGF,QAAQ,CAACG,KAAK,CAAC,GAAG,CAAC;EAEvC,MAAMC,mBAAmB,GAAGC,MAAM,CAACC,WAAW,CAC5CD,MAAM,CAACE,OAAO,CAACtB,YAAY,CAAC,CAACuB,GAAG,CAAC,CAAC,CAACC,GAAG,EAAEC,KAAK,CAAC,KAAK,CAACA,KAAK,EAAED,GAAG,CAAC,CACjE,CAAC;EAEC,MAAME,IAAI,GAAGV,QAAQ,GAAGhB,YAAY,GAAGmB,mBAAmB;EAE1D,MAAMQ,eAAe,GAAGV,SAAS,CAACM,GAAG,CAACK,IAAI,IAAIF,IAAI,CAACE,IAAI,CAAC,IAAIA,IAAI,CAAC;EAEjE,OAAOD,eAAe,CAACE,IAAI,CAAC,GAAG,CAAC;AAClC,CAAC;AAED,SAASC,SAASA,CAACf,QAAQ,EAAE;EAC3B,MAAMgB,KAAK,GAAGhB,QAAQ,CAACiB,OAAO,CAAC,SAAS,EAAE,GAAG,CAAC,CAACd,KAAK,CAAC,KAAK,CAAC;EAC3D,IAAIa,KAAK,CAACE,MAAM,KAAK,CAAC,EAAE;IACtB,OAAO;MACLC,UAAU,EAAEH,KAAK,CAAC,CAAC,CAAC;MACpBI,UAAU,EAAE,EAAE;MACdC,eAAe,EAAE,EAAE;MACnBC,UAAU,EAAEN,KAAK,CAAC,CAAC;IACrB,CAAC;EACH,CAAC,MAAM,IAAIA,KAAK,CAACE,MAAM,KAAK,CAAC,EAAE;IAC7B,OAAO;MACLC,UAAU,EAAEH,KAAK,CAAC,CAAC,CAAC;MACpBI,UAAU,EAAEJ,KAAK,CAAC,CAAC,CAAC;MACpBK,eAAe,EAAE,EAAE;MACnBC,UAAU,EAAEN,KAAK,CAAC,CAAC;IACrB,CAAC;EACH,CAAC,MAAM,IAAIA,KAAK,CAACE,MAAM,KAAK,CAAC,EAAE;IAC7B,OAAO;MACLC,UAAU,EAAEH,KAAK,CAAC,CAAC,CAAC;MACpBI,UAAU,EAAEJ,KAAK,CAAC,CAAC,CAAC;MACpBK,eAAe,EAAEL,KAAK,CAAC,CAAC,CAAC;MACzBM,UAAU,EAAEN,KAAK,CAAC,CAAC;IACrB,CAAC;EACH;EACA;EACA,OAAO;IAAEG,UAAU,EAAEH,KAAK,CAAC,CAAC,CAAC;IAAEI,UAAU,EAAE,EAAE;IAAEC,eAAe,EAAE,EAAE;IAAEC,UAAU,EAAEN,KAAK,CAAC,CAAC;EAAE,CAAC;AAC5F;AAGA,MAAMO,UAAU,GAAGA,CAAA,KAAM;EAAAC,EAAA;EAAA,IAAAC,qBAAA,EAAAC,sBAAA,EAAAC,qBAAA,EAAAC,qBAAA,EAAAC,qBAAA,EAAAC,qBAAA,EAAAC,sBAAA,EAAAC,sBAAA,EAAAC,sBAAA;EACvB,MAAM,CAACC,WAAW,EAAEC,cAAc,CAAC,GAAGvD,QAAQ,CAAC,KAAK,CAAC;EACrD,MAAM,CAACwD,WAAW,EAAEC,cAAc,CAAC,GAAGzD,QAAQ,CAAC,EAAE,CAAC;EAClD,MAAM,CAAC0D,aAAa,EAAEC,gBAAgB,CAAC,GAAG3D,QAAQ,CAAC,IAAI,CAAC;EACxD,MAAM,CAAC4D,QAAQ,EAAEC,WAAW,CAAC,GAAG7D,QAAQ,CAAC,IAAI,CAAC;EAC9C,MAAM,CAAC8D,KAAK,EAAEC,QAAQ,CAAC,GAAG/D,QAAQ,CAAC,EAAE,CAAC;EAEtC,MAAMgE,mBAAmB,GAAG,MAAOC,QAAQ,IAAK;IAC9C,MAAMC,OAAO,GAAGlD,MAAM,CAACkD,OAAO,CAAC,CAAC;IAChC,IAAI;MACF,MAAMC,MAAM,GAAG,MAAMD,OAAO,CAACE,GAAG,CAC9B;AACR;AACA;AACA;AACA;AACA,SAAS,EACD;QAAEH;MAAS,CACb,CAAC;MAED,IAAIE,MAAM,CAACE,OAAO,CAAC/B,MAAM,GAAG,CAAC,EAAE;QAC7B,MAAMgC,MAAM,GAAGH,MAAM,CAACE,OAAO,CAAC,CAAC,CAAC;QAChC,MAAME,UAAU,GAAGD,MAAM,CAACE,GAAG,CAAC,QAAQ,CAAC;QACvC,MAAMC,aAAa,GAAGH,MAAM,CAACE,GAAG,CAAC,UAAU,CAAC;QAE5C,MAAME,MAAM,GAAG;UACbC,EAAE,EAAEJ,UAAU,CAACK,QAAQ,CAACC,QAAQ,CAAC,CAAC;UAClC,GAAGN,UAAU,CAACO;QAChB,CAAC;QAED,MAAMC,QAAQ,GAAGN,aAAa,CAC3BO,MAAM,CAACC,KAAK,IAAIA,KAAK,CAAC,CAAC;QAAA,CACvBrD,GAAG,CAACqD,KAAK,KAAK;UACbN,EAAE,EAAEM,KAAK,CAACL,QAAQ,CAACC,QAAQ,CAAC,CAAC;UAC7B,GAAGI,KAAK,CAACH;QACX,CAAC,CAAC,CAAC;QAEL,OAAO;UAAEJ,MAAM;UAAEK;QAAS,CAAC;MAC7B,CAAC,MAAM;QACL,OAAO,IAAI;MACb;IACF,CAAC,CAAC,OAAOjB,KAAK,EAAE;MACdoB,OAAO,CAACpB,KAAK,CAAC,qCAAqC,EAAEA,KAAK,CAAC;MAC3D,OAAO,IAAI;IACb,CAAC,SAAS;MACR,MAAMI,OAAO,CAACiB,KAAK,CAAC,CAAC;IACvB;EACF,CAAC;EAED,MAAMC,kBAAkB,GAAG,MAAOC,CAAC,IAAK;IACtC9B,cAAc,CAAC,IAAI,CAAC;IACpB8B,CAAC,CAACC,eAAe,CAAC,CAAC;IACnB,MAAM;MAAEZ,MAAM;MAAEK;IAAS,CAAC,GAAG,MAAMf,mBAAmB,CAACN,aAAa,CAAC6B,QAAQ,CAAC;;IAE9E;IACA,MAAMC,aAAa,GAAG;MACpBb,EAAE,EAAED,MAAM,CAACC,EAAE;MACbc,IAAI,EAAEf,MAAM,CAACe,IAAI;MACjBV,QAAQ,EAAEA,QAAQ,CAACnD,GAAG,CAACqD,KAAK,KAAK;QAC/BN,EAAE,EAAEM,KAAK,CAACN,EAAE;QACZc,IAAI,EAAER,KAAK,CAACQ;MACd,CAAC,CAAC;IACJ,CAAC;IAED5B,WAAW,CAAC2B,aAAa,CAAC;EAE5B,CAAC;EAED,MAAME,kBAAkB,GAAIL,CAAC,IAAK;IAChC5B,cAAc,CAAC4B,CAAC,CAACM,MAAM,CAAC7D,KAAK,CAAC;EAChC,CAAC;EAED,MAAM8D,kBAAkB,GAAIC,cAAc,IAAK;IAC7C;IACAlC,gBAAgB,CAAC;MACfpB,UAAU,EAAEsD,cAAc,CAACtD,UAAU;MACrCC,UAAU,EAAEqD,cAAc,CAACrD,UAAU;MACrCC,eAAe,EAAEoD,cAAc,CAACpD,eAAe;MAC/CC,UAAU,EAAEmD,cAAc,CAACnD,UAAU;MACrCoD,MAAM,EAAED,cAAc,CAACC,MAAM;MAC7BC,GAAG,EAAEF,cAAc,CAACE,GAAG,CAAG;IAC5B,CAAC,CAAC;EACJ,CAAC;EAED,MAAMC,kBAAkB,GAAG,MAAAA,CAAA,KAAY;IACrCzC,cAAc,CAAC,KAAK,CAAC;IACrB,IAAI,CAACC,WAAW,CAACyC,IAAI,CAAC,CAAC,EAAE;MACvBlC,QAAQ,CAAC,wBAAwB,CAAC;MAClCJ,gBAAgB,CAAC,IAAI,CAAC;MACtB;IACF;IACA,MAAMuC,YAAY,CAAC1C,WAAW,CAACyC,IAAI,CAAC,CAAC,CAAC;EACxC,CAAC;EAED,MAAMC,YAAY,GAAG,MAAOC,UAAU,IAAK;IACzC,IAAIC,mBAAmB,GAAGjF,aAAa,CAACgF,UAAU,EAAE,KAAK,CAAC;IAC1DjB,OAAO,CAACmB,GAAG,CAACD,mBAAmB,CAAC;IAChC,MAAM;MAAE7D,UAAU;MAAEC,UAAU;MAAEC,eAAe;MAAEC;IAAW,CAAC,GAAGP,SAAS,CAACiE,mBAAmB,CAAC;IAE9F,IAAIE,WAAW,GAAG,EAAE;IAEpB,MAAMC,iBAAiB,GAAG,CAAC,CAAC;IAE5B,IAAIhE,UAAU,EAAC;MACb2C,OAAO,CAACmB,GAAG,CAAC,yBAAyB9D,UAAU,EAAE,CAAC;MAElD,IAAIC,UAAU,EAAE;QACd0C,OAAO,CAACmB,GAAG,CAAC,yBAAyB7D,UAAU,EAAE,CAAC;QAElD,IAAIC,eAAe,EAAE;UACnByC,OAAO,CAACmB,GAAG,CAAC,8BAA8B5D,eAAe,EAAE,CAAC;UAE5D,IAAIC,UAAU,EAAE;YACdwC,OAAO,CAACmB,GAAG,CAAC,6BAA6B3D,UAAU,EAAE,CAAC;YAEtD4D,WAAW,IAAI;AAC3B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;YAEDC,iBAAiB,CAAChE,UAAU,GAAGA,UAAU;YACzCgE,iBAAiB,CAAC/D,UAAU,GAAGA,UAAU;YACzC+D,iBAAiB,CAAC9D,eAAe,GAAGA,eAAe;YACnD8D,iBAAiB,CAAC7D,UAAU,GAAGA,UAAU;UAE3C,CAAC,MACI;YACHwC,OAAO,CAACmB,GAAG,CAAC,yBAAyB,CAAC;YACtCC,WAAW,IAAI;AAC3B;AACA;AACA;AACA;AACA;AACA,sIAAsI;YAE1HC,iBAAiB,CAAChE,UAAU,GAAGA,UAAU;YACzCgE,iBAAiB,CAAC/D,UAAU,GAAGA,UAAU;YACzC+D,iBAAiB,CAAC9D,eAAe,GAAGA,eAAe;UACrD;QAEF,CAAC,MAAM;UACLyC,OAAO,CAACmB,GAAG,CAAC,8BAA8B,CAAC;UAC3C,IAAI3D,UAAU,EAAC;YACb4D,WAAW,IAAI;AAC3B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;YACDC,iBAAiB,CAAChE,UAAU,GAAGA,UAAU;YACzCgE,iBAAiB,CAAC/D,UAAU,GAAGA,UAAU;YACzC+D,iBAAiB,CAAC7D,UAAU,GAAGA,UAAU;UAC3C,CAAC,MACG;YACF4D,WAAW,IAAI;AAC3B;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;YACDC,iBAAiB,CAAChE,UAAU,GAAGA,UAAU;YACzCgE,iBAAiB,CAAC/D,UAAU,GAAGA,UAAU;UAC3C;QACA;MACJ,CAAC,MACI;QACH,IAAIE,UAAU,EAAC;UACb4D,WAAW,IAAI;AACzB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;UACDC,iBAAiB,CAAChE,UAAU,GAAGA,UAAU;UACzCgE,iBAAiB,CAAC7D,UAAU,GAAGA,UAAU;QACzC,CAAC,MACG;UACFwC,OAAO,CAACmB,GAAG,CAAC,yBAAyB,CAAC;UACtCC,WAAW,IAAI;AACzB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW;UACDC,iBAAiB,CAAChE,UAAU,GAAGA,UAAU;QAC3C;MACF;IACF;IAEA,MAAM2B,OAAO,GAAGlD,MAAM,CAACkD,OAAO,CAAC,CAAC;IAChC,IAAI;MACF,MAAMC,MAAM,GAAG,MAAMD,OAAO,CAACE,GAAG,CAACkC,WAAW,EAAEC,iBAAiB,CAAC;MAChE,IAAIpC,MAAM,CAACE,OAAO,CAAC/B,MAAM,KAAK,CAAC,EAAE;QAC/ByB,QAAQ,CAAC,+BAA+B,CAAC;QACzCJ,gBAAgB,CAAC,IAAI,CAAC;QACtB;MACF,CAAC,MACI,IAAIQ,MAAM,CAACE,OAAO,CAAC/B,MAAM,KAAK,CAAC,EAAE;QAAA,IAAAkE,WAAA,EAAAC,qBAAA,EAAAC,mBAAA,EAAAC,qBAAA,EAAAC,sBAAA,EAAAC,sBAAA;QACpC,MAAMvC,MAAM,GAAGH,MAAM,CAACE,OAAO,CAAC,CAAC,CAAC;QAChC,IAAI0B,GAAG;QACP,IAAIe,GAAG,GAAGxC,MAAM,CAACE,GAAG,CAAC,UAAU,CAAC;QAChC,IAAIuC,GAAG,GAAGzC,MAAM,CAACE,GAAG,CAAC,KAAK,CAAC;QAC3B,IAAIsC,GAAG,IAAI,IAAI,EAAC;UACdf,GAAG,GAAG,CAAC,CAAC;QACV,CAAC,MACG;UACFA,GAAG,GAAG,IAAIiB,IAAI,CAAC,CAAC,CAACC,WAAW,CAAC,CAAC,GAAGH,GAAG;QACtC;QAEA,MAAMI,OAAO,GAAG5C,MAAM,CAACE,GAAG,CAAC,SAAS,CAAC,CAACK,QAAQ,CAAC,CAAC;QAEhD,MAAMsC,WAAW,GAAG,MAAMjD,OAAO,CAACE,GAAG,CAAC;AAC9C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS,EAAE;UAAC8C;QAAO,CAAC,CAAC;QACb,MAAME,YAAY,GAAGD,WAAW,CAAC9C,OAAO,CAAC,CAAC,CAAC;QAE3C,MAAMgD,mBAAmB,GAAG,MAAMnD,OAAO,CAACE,GAAG,CAAC;AACtD;AACA;AACA;AACA,SAAS,EAAE;UAAE8C;QAAQ,CAAC,CAAC;QAEf,MAAMI,SAAS,GAAG,MAAMpD,OAAO,CAACE,GAAG,CAAC;AAC5C;AACA;AACA;AACA,SAAS,EAAE;UAAE8C;QAAQ,CAAC,CAAC;QACf,MAAMxD,aAAa,GAAG;UACpB6B,QAAQ,EAAE2B,OAAO;UACjB3E,UAAU,GAAAiE,WAAA,GAAElC,MAAM,CAACE,GAAG,CAAC,WAAW,CAAC,cAAAgC,WAAA,cAAAA,WAAA,GAAI,WAAW;UAClDhE,UAAU,EAAE8B,MAAM,CAACiD,GAAG,CAAC,YAAY,CAAC,GAAGjD,MAAM,CAACE,GAAG,CAAC,YAAY,CAAC,GAAG,WAAW;UAC7E/B,eAAe,EAAE6B,MAAM,CAACiD,GAAG,CAAC,iBAAiB,CAAC,GAAGjD,MAAM,CAACE,GAAG,CAAC,iBAAiB,CAAC,GAAG,WAAW;UAC5F9B,UAAU,EAAE4B,MAAM,CAACiD,GAAG,CAAC,YAAY,CAAC,GAAGjD,MAAM,CAACE,GAAG,CAAC,YAAY,CAAC,GAAG,WAAW;UAC7EsB,MAAM,EAAExB,MAAM,CAACiD,GAAG,CAAC,aAAa,CAAC,GAAGjD,MAAM,CAACE,GAAG,CAAC,aAAa,CAAC,GAAG,WAAW;UAC3EuB,GAAG;UACHgB,GAAG;UACHS,UAAU,EAAEJ,YAAY,CAACG,GAAG,CAAC,YAAY,CAAC,GAAGH,YAAY,CAAC5C,GAAG,CAAC,YAAY,CAAC,GAAG,WAAW;UACzFiD,gBAAgB,EAAEL,YAAY,CAACG,GAAG,CAAC,kBAAkB,CAAC,GAAGH,YAAY,CAAC5C,GAAG,CAAC,kBAAkB,CAAC,GAAG,WAAW;UAAE;UAC7GkD,qBAAqB,EAAEN,YAAY,CAACG,GAAG,CAAC,uBAAuB,CAAC,GAAGH,YAAY,CAAC5C,GAAG,CAAC,uBAAuB,CAAC,GAAG,WAAW;UAAE;UAC5HmD,gBAAgB,EAAEP,YAAY,CAACG,GAAG,CAAC,kBAAkB,CAAC,GAAGH,YAAY,CAAC5C,GAAG,CAAC,kBAAkB,CAAC,GAAG,WAAW;UAAE;;UAE7GoD,UAAU,EAAEtD,MAAM,CAACiD,GAAG,CAAC,YAAY,CAAC,GAAGjD,MAAM,CAACE,GAAG,CAAC,YAAY,CAAC,GAAG,WAAW;UAAE;UAC/EqD,aAAa,GAAApB,qBAAA,IAAAC,mBAAA,GAAEY,SAAS,CAACjD,OAAO,CAAC,CAAC,CAAC,cAAAqC,mBAAA,uBAApBA,mBAAA,CAAsBlC,GAAG,CAAC,WAAW,CAAC,cAAAiC,qBAAA,cAAAA,qBAAA,GAAI,WAAW;UAAE;UACtEqB,aAAa,GAAAnB,qBAAA,IAAAC,sBAAA,GAAES,mBAAmB,CAAChD,OAAO,CAAC,CAAC,CAAC,cAAAuC,sBAAA,wBAAAC,sBAAA,GAA9BD,sBAAA,CAAgCpC,GAAG,CAAC,eAAe,CAAC,cAAAqC,sBAAA,uBAApDA,sBAAA,CAAsDkB,KAAK,CAAC,CAAC,cAAApB,qBAAA,cAAAA,qBAAA,GAAI,CAAC,CAAC;QACpF,CAAC;QAEDhD,gBAAgB,CAACD,aAAa,CAAC;QAC/BK,QAAQ,CAAC,EAAE,CAAC;MAEd,CAAC,MAAM,IAAII,MAAM,CAACE,OAAO,CAAC/B,MAAM,IAAI,CAAC,EAAE;QACrC,MAAM0F,eAAe,GAAG7D,MAAM,CAACE,OAAO,CAACzC,GAAG,CAAC0C,MAAM,KAAK;UACpD/B,UAAU,EAAE+B,MAAM,CAACE,GAAG,CAAC,WAAW,CAAC;UACnChC,UAAU,EAAE8B,MAAM,CAACiD,GAAG,CAAC,YAAY,CAAC,GAAGjD,MAAM,CAACE,GAAG,CAAC,YAAY,CAAC,GAAG,WAAW;UAAE;UAC/E/B,eAAe,EAAE6B,MAAM,CAACiD,GAAG,CAAC,iBAAiB,CAAC,GAAGjD,MAAM,CAACE,GAAG,CAAC,iBAAiB,CAAC,GAAG,WAAW;UAAE;UAC9F9B,UAAU,EAAE4B,MAAM,CAACiD,GAAG,CAAC,YAAY,CAAC,GAAGjD,MAAM,CAACE,GAAG,CAAC,YAAY,CAAC,GAAG,WAAW,CAAE;QACjF,CAAC,CAAC,CAAC;QAEHb,gBAAgB,CAAC;UAAEqE;QAAgB,CAAC,CAAC;QACrCjE,QAAQ,CAAC,sEAAsE,CAAC;MAElF,CAAC,MAAM;QACLJ,gBAAgB,CAAC,IAAI,CAAC;QACtBI,QAAQ,CAAC,8BAA8B,CAAC;MAC1C;IACF,CAAC,CAAC,OAAOkE,GAAG,EAAE;MACZ/C,OAAO,CAACpB,KAAK,CAAC,cAAc,EAAEmE,GAAG,CAAC;MAClClE,QAAQ,CAAC,sBAAsB,CAAC;MAChCJ,gBAAgB,CAAC,IAAI,CAAC;IACxB,CAAC,SAAS;MACR,MAAMO,OAAO,CAACiB,KAAK,CAAC,CAAC;IACvB;EAEF,CAAC;EAED,oBACE/E,OAAA;IAAK8H,SAAS,EAAC,aAAa;IAAAnD,QAAA,gBAC1B3E,OAAA;MAAQ8H,SAAS,EAAC,eAAe;MAAAnD,QAAA,gBAC/B3E,OAAA;QAAA2E,QAAA,EAAI;MAA2B;QAAAoD,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAAI,CAAC,eACpClI,OAAA;QACEmI,IAAI,EAAC,MAAM;QACXL,SAAS,EAAC,YAAY;QACtBM,WAAW,EAAC,+JAAkC;QAC9C1G,KAAK,EAAE0B,WAAY;QACnBiF,QAAQ,EAAE/C;MAAmB;QAAAyC,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAC9B,CAAC,eACFlI,OAAA;QAAQ8H,SAAS,EAAC,eAAe;QAACQ,OAAO,EAAE1C,kBAAmB;QAAAjB,QAAA,EAAC;MAAI;QAAAoD,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAAQ,CAAC;IAAA;MAAAH,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OACtE,CAAC,EAERxE,KAAK,iBAAI1D,OAAA;MAAK8H,SAAS,EAAC,eAAe;MAAAnD,QAAA,EAAEjB;IAAK;MAAAqE,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OAAM,CAAC,EAErD5E,aAAa,IAAIA,aAAa,CAACsE,eAAe,gBACnD5H,OAAA;MAAK8H,SAAS,EAAC,kBAAkB;MAAAnD,QAAA,gBAC/B3E,OAAA;QAAA2E,QAAA,EAAI;MAAa;QAAAoD,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAAI,CAAC,EACrB5E,aAAa,CAACsE,eAAe,CAACpG,GAAG,CAAC,CAAC+G,MAAM,EAAEC,KAAK,kBAC/CxI,OAAA;QAEE8H,SAAS,EAAC,YAAY;QACtBQ,OAAO,EAAEA,CAAA,KAAM9C,kBAAkB,CAAC+C,MAAM,CAAE;QAC1CE,KAAK,EAAE;UAAEC,MAAM,EAAE;QAAU,CAAE;QAAA/D,QAAA,gBAE7B3E,OAAA;UAAA2E,QAAA,eAAG3E,OAAA;YAAG8H,SAAS,EAAC,eAAe;YAAAnD,QAAA,GAAE6D,KAAK,GAAG,CAAC,EAAC,IAAE,EAACzH,aAAa,CAACwH,MAAM,CAACpG,UAAU,CAAC,EAAC,gBAAI,EAACpB,aAAa,CAACwH,MAAM,CAACnG,UAAU,CAAC,EAAC,gBAAI,EAACrB,aAAa,CAACwH,MAAM,CAAClG,eAAe,CAAC,EAAC,GAAC,EAACtB,aAAa,CAACwH,MAAM,CAACjG,UAAU,CAAC;UAAA;YAAAyF,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAAI;QAAC;UAAAH,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAAG,CAAC,eAC3MlI,OAAA;UAAA+H,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAAK,CAAC;MAAA,GANDM,KAAK;QAAAT,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAOP,CACN,CAAC;IAAA;MAAAH,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OACC,CAAC,GACJ5E,aAAa,gBACftD,OAAA;MAAK8H,SAAS,EAAC,gBAAgB;MAAAnD,QAAA,gBAC7B3E,OAAA;QAAA2E,QAAA,EAAI;MAAc;QAAAoD,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAAI,CAAC,eACvBlI,OAAA;QAAA2E,QAAA,GACC5D,aAAa,EAAA0B,qBAAA,GAACa,aAAa,aAAbA,aAAa,uBAAbA,aAAa,CAAEnB,UAAU,cAAAM,qBAAA,cAAAA,qBAAA,GAAI,WAAW,CAAC,EACvDa,aAAa,aAAbA,aAAa,eAAbA,aAAa,CAAElB,UAAU,GAAG,OAAOrB,aAAa,CAACuC,aAAa,CAAClB,UAAU,CAAC,EAAE,GAAG,EAAE,EACjFkB,aAAa,aAAbA,aAAa,eAAbA,aAAa,CAAEjB,eAAe,GAAG,OAAOtB,aAAa,CAACuC,aAAa,CAACjB,eAAe,CAAC,EAAE,GAAG,EAAE,EAC3FiB,aAAa,aAAbA,aAAa,eAAbA,aAAa,CAAEhB,UAAU,GAAG,IAAIvB,aAAa,CAACuC,aAAa,CAAChB,UAAU,CAAC,EAAE,GAAG,EAAE;MAAA;QAAAyF,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAC/E,CAAC,eACDlI,OAAA;QAAO8H,SAAS,EAAC,sBAAsB;QAAAnD,QAAA,gBACrC3E,OAAA;UAAA2E,QAAA,eACE3E,OAAA;YAAA2E,QAAA,gBACE3E,OAAA;cAAI8H,SAAS,EAAC;YAAa;cAAAC,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OAAK,CAAC,eACjClI,OAAA;cAAA2E,QAAA,EAAI;YAAK;cAAAoD,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OAAI,CAAC,eACdlI,OAAA;cAAA2E,QAAA,EAAI;YAAQ;cAAAoD,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OAAI,CAAC,eACjBlI,OAAA;cAAA2E,QAAA,EAAI;YAAS;cAAAoD,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OAAI,CAAC,eAClBlI,OAAA;cAAA2E,QAAA,EAAI;YAAmB;cAAAoD,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OAAI,CAAC;UAAA;YAAAH,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAC1B;QAAC;UAAAH,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OACA,CAAC,eACRlI,OAAA;UAAA2E,QAAA,gBACE3E,OAAA;YAAA2E,QAAA,gBACE3E,OAAA;cAAA2E,QAAA,eAAI3E,OAAA;gBAAA2E,QAAA,EAAQ;cAAK;gBAAAoD,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OAAQ;YAAC;cAAAH,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OAAI,CAAC,eAC/BlI,OAAA;cAAA2E,QAAA,eAAI3E,OAAA;gBAAG8H,SAAS,EAAC,eAAe;gBAAAnD,QAAA,EAAE5D,aAAa,EAAA2B,sBAAA,GAACY,aAAa,aAAbA,aAAa,uBAAbA,aAAa,CAAEnB,UAAU,cAAAO,sBAAA,cAAAA,sBAAA,GAAI,EAAE,CAAC,IAAI;cAAW;gBAAAqF,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OAAI;YAAC;cAAAH,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OAAI,CAAC,eACzGlI,OAAA;cAAA2E,QAAA,eAAI3E,OAAA;gBAAG8H,SAAS,EAAC,eAAe;gBAAAnD,QAAA,EAAE5D,aAAa,EAAA4B,qBAAA,GAACW,aAAa,aAAbA,aAAa,uBAAbA,aAAa,CAAElB,UAAU,cAAAO,qBAAA,cAAAA,qBAAA,GAAI,EAAE,CAAC,IAAI;cAAW;gBAAAoF,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OAAI;YAAC;cAAAH,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OAAI,CAAC,eACzGlI,OAAA;cAAA2E,QAAA,eAAI3E,OAAA;gBAAG8H,SAAS,EAAC,eAAe;gBAAAnD,QAAA,EAAE5D,aAAa,EAAA6B,qBAAA,GAACU,aAAa,aAAbA,aAAa,uBAAbA,aAAa,CAAEjB,eAAe,cAAAO,qBAAA,cAAAA,qBAAA,GAAI,EAAE,CAAC,IAAI;cAAW;gBAAAmF,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OAAI;YAAC;cAAAH,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OAAI,CAAC,eAC9GlI,OAAA;cAAA2E,QAAA,eAAI3E,OAAA;gBAAG8H,SAAS,EAAC,eAAe;gBAAAnD,QAAA,EAAE5D,aAAa,EAAA8B,qBAAA,GAACS,aAAa,aAAbA,aAAa,uBAAbA,aAAa,CAAEhB,UAAU,cAAAO,qBAAA,cAAAA,qBAAA,GAAI,EAAE,CAAC,IAAI;cAAW;gBAAAkF,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OAAI;YAAC;cAAAH,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OAAI,CAAC;UAAA;YAAAH,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OACvG,CAAC,eACLlI,OAAA;YAAA2E,QAAA,gBACE3E,OAAA;cAAA2E,QAAA,eAAI3E,OAAA;gBAAA2E,QAAA,EAAQ;cAAI;gBAAAoD,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OAAQ;YAAC;cAAAH,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OAAI,CAAC,eAC9BlI,OAAA;cAAA2E,QAAA,eAAI3E,OAAA;gBAAG8H,SAAS,EAAC,eAAe;gBAAAnD,QAAA,EAAE5D,aAAa,EAAA+B,qBAAA,GAACQ,aAAa,aAAbA,aAAa,uBAAbA,aAAa,CAAE8D,UAAU,cAAAtE,qBAAA,cAAAA,qBAAA,GAAI,EAAE,CAAC,IAAI;cAAW;gBAAAiF,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OAAI;YAAC;cAAAH,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OAAI,CAAC,eACzGlI,OAAA;cAAA2E,QAAA,eAAI3E,OAAA;gBAAG8H,SAAS,EAAC,eAAe;gBAAAnD,QAAA,EAAE5D,aAAa,EAAAgC,sBAAA,GAACO,aAAa,aAAbA,aAAa,uBAAbA,aAAa,CAAE+D,gBAAgB,cAAAtE,sBAAA,cAAAA,sBAAA,GAAI,EAAE,CAAC,IAAI;cAAW;gBAAAgF,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OAAI;YAAC;cAAAH,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OAAI,CAAC,eAC/GlI,OAAA;cAAA2E,QAAA,eAAI3E,OAAA;gBAAG8H,SAAS,EAAC,eAAe;gBAAAnD,QAAA,EAAE5D,aAAa,EAAAiC,sBAAA,GAACM,aAAa,aAAbA,aAAa,uBAAbA,aAAa,CAAEgE,qBAAqB,cAAAtE,sBAAA,cAAAA,sBAAA,GAAI,EAAE,CAAC,IAAI;cAAW;gBAAA+E,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OAAI;YAAC;cAAAH,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OAAI,CAAC,eACpHlI,OAAA;cAAA2E,QAAA,eAAI3E,OAAA;gBAAG8H,SAAS,EAAC,eAAe;gBAAAnD,QAAA,EAAE5D,aAAa,EAAAkC,sBAAA,GAACK,aAAa,aAAbA,aAAa,uBAAbA,aAAa,CAAEiE,gBAAgB,cAAAtE,sBAAA,cAAAA,sBAAA,GAAI,EAAE,CAAC,IAAI;cAAW;gBAAA8E,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OAAI;YAAC;cAAAH,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OAAI,CAAC;UAAA;YAAAH,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAC7G,CAAC;QAAA;UAAAH,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OACA,CAAC;MAAA;QAAAH,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OACH,CAAC,eACRlI,OAAA;QAAO8H,SAAS,EAAC,uBAAuB;QAAAnD,QAAA,gBACtC3E,OAAA;UAAA2E,QAAA,eACE3E,OAAA;YAAA2E,QAAA,gBACE3E,OAAA;cAAA2E,QAAA,EAAI;YAAK;cAAAoD,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OAAI,CAAC,eACdlI,OAAA;cAAA2E,QAAA,EAAI;YAAK;cAAAoD,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OAAI,CAAC,eACdlI,OAAA;cAAA2E,QAAA,EAAI;YAAc;cAAAoD,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OAAI,CAAC,eACvBlI,OAAA;cAAA2E,QAAA,EAAI;YAAW;cAAAoD,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OAAI,CAAC,eACpBlI,OAAA;cAAA2E,QAAA,EAAI;YAAW;cAAAoD,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OAAI,CAAC;UAAA;YAAAH,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAClB;QAAC;UAAAH,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OACA,CAAC,eACRlI,OAAA;UAAA2E,QAAA,eACE3E,OAAA;YAAA2E,QAAA,gBACE3E,OAAA;cAAA2E,QAAA,EAAKrB,aAAa,CAACoC,MAAM,KAAK,MAAM,GAAG,QAAQ,GAAI;YAAS;cAAAqC,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OAAK,CAAC,eAClElI,OAAA;cAAA2E,QAAA,EACGrB,aAAa,CAACkE,UAAU,KAAK,IAAI;cAC9B;cACClE,aAAa,CAACqC,GAAG,KAAK,CAAC,GACpB,qBAAqB,IAAIiB,IAAI,CAAC,CAAC,CAACC,WAAW,CAAC,CAAC,GAAGvD,aAAa,CAACqC,GAAG,GAAG,GACpErC,aAAa,CAACqC,GAAG,KAAK,CAAC,GACvB,iBAAiB,IAAIiB,IAAI,CAAC,CAAC,CAACC,WAAW,CAAC,CAAC,GAAGvD,aAAa,CAACqC,GAAG,GAAG,GAChErC,aAAa,CAACqC,GAAG,IAAI,CAAC,IAAIrC,aAAa,CAACqC,GAAG,IAAI,EAAE,GACjD,GAAGrC,aAAa,CAACqC,GAAG,kBAAkB,IAAIiB,IAAI,CAAC,CAAC,CAACC,WAAW,CAAC,CAAC,GAAGvD,aAAa,CAACqC,GAAG,GAAG,GACrF,GAAGrC,aAAa,CAACqC,GAAG,gBAAgB,IAAIiB,IAAI,CAAC,CAAC,CAACC,WAAW,CAAC,CAAC,GAAGvD,aAAa,CAACqC,GAAG,GAAG;cACvF;cACArC,aAAa,CAACqF,cAAc,CAAC,KAAK,CAAC,IAAIrF,aAAa,CAACqD,GAAG;cACtD;cACArD,aAAa,CAACqD,GAAG,KAAK,WAAW,GAC7B,oBAAoBrD,aAAa,CAACqD,GAAG,GAAGrD,aAAa,CAACsF,WAAW,MAAM,GACvE,sCAAsC,IAAIhC,IAAI,CAAC,CAAC,CAACC,WAAW,CAAC,CAAC,GAAGvD,aAAa,CAACqC,GAAG,GAAG;cACzF;cACA,uBAAuB,IAAIiB,IAAI,CAAC,CAAC,CAACC,WAAW,CAAC,CAAC,GAAGvD,aAAa,CAACqC,GAAG;YAAG;cAAAoC,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OAC1E,CAAC,eAILlI,OAAA;cAAA2E,QAAA,EACGrB,aAAa,CAACmE,aAAa,KAAK,IAAI,GAChCnE,aAAa,CAACoC,MAAM,KAAK,MAAM,GAAG,OAAO,GAAG,QAAQ,GACpDpC,aAAa,CAACoC,MAAM,KAAK,MAAM,GAAG,MAAM,GAAG;YAAQ;cAAAqC,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OACtD,CAAC,eACLlI,OAAA;cAAA2E,QAAA,EACCrB,aAAa,CAACkE,UAAU,KAAK,IAAI,GAC7BlE,aAAa,CAACoC,MAAM,KAAK,MAAM,GAAG,IAAI,GAAG,KAAK,GAC9CpC,aAAa,CAACoC,MAAM,KAAK,MAAM,GAAG,OAAO,GAAG;YAAS;cAAAqC,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OACtD,CAAC,eACPlI,OAAA;cAAA2E,QAAA,eACA3E,OAAA;gBAAQuE,EAAE,EAAC,gBAAgB;gBAC3B+D,OAAO,EAAEtD,kBAAmB;gBAAAL,QAAA,EACzBrB,aAAa,CAACoE,aAAa,KAAK,CAAC,IAAIpE,aAAa,CAACoE,aAAa,IAAI,IAAI,GACrE,gBAAgB,GAChBpE,aAAa,CAACoE,aAAa,KAAK,CAAC,GACjC,UAAU,GACVpE,aAAa,CAACoE,aAAa,KAAK,CAAC,GACjC,OAAO,GACPpE,aAAa,CAACoE,aAAa,IAAI,CAAC,IAAIpE,aAAa,CAACoE,aAAa,IAAI,EAAE,GACrE,GAAGpE,aAAa,CAACoE,aAAa,QAAQ,GACtC,GAAGpE,aAAa,CAACoE,aAAa;cAAO;gBAAAK,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OAEnC;YAAC;cAAAH,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OAEP,CAAC;UAAA;YAAAH,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OACC;QAAC;UAAAH,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OACA,CAAC;MAAA;QAAAH,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OACH,CAAC,eACRlI,OAAA;QAAK8H,SAAS,EAAC,cAAc;QAAAnD,QAAA,gBACzB3E,OAAA;UAAK8H,SAAS,EAAC;QAAW;UAAAC,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAErB,CAAC,EAEP1E,QAAQ,iBACPxD,OAAA;UAAK8H,SAAS,EAAC,gBAAgB;UAAAnD,QAAA,eAC7B3E,OAAA,CAACF,IAAI;YACH+I,IAAI,EAAErF,QAAS;YACfsF,WAAW,EAAC,UAAU;YACtBC,QAAQ,EAAC,MAAM;YACfC,QAAQ,EAAE;cAAEC,CAAC,EAAE,EAAE;cAAEC,CAAC,EAAE;YAAI,CAAE;YAC5BC,UAAU,EAAE;cAAEC,QAAQ,EAAE,CAAC;cAAEC,WAAW,EAAE;YAAE,CAAE;YAC5CC,SAAS,EAAE;cAAEL,CAAC,EAAE,GAAG;cAAEC,CAAC,EAAE;YAAG,CAAE;YAC7BK,WAAW,EAAE;cAAEC,GAAG,EAAE,CAAC;cAAEC,GAAG,EAAE;YAAE,CAAE,CAAC;YAAA;YACjCC,uBAAuB,EAAEA,CAAC;cAAEC;YAAU,CAAC,kBACrC3J,OAAA;cAAG8H,SAAS,EAAC,WAAW;cAAAnD,QAAA,gBACtB3E,OAAA;gBAAA2E,QAAA,EAAQgF,SAAS,CAACpF;cAAE;gBAAAwD,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OAAQ,CAAC,eAC7BlI,OAAA;gBACE8H,SAAS,EAAC,gBAAgB;gBAC1BmB,CAAC,EAAC,KAAK;gBACPC,CAAC,EAAC,KAAK;gBACPU,KAAK,EAAC,KAAK;gBACXC,MAAM,EAAC;cAAI;gBAAA9B,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OACZ,CAAC,eACFlI,OAAA;gBAAM8H,SAAS,EAAC,gBAAgB;gBAACmB,CAAC,EAAC,GAAG;gBAACC,CAAC,EAAC,GAAG;gBAAAvE,QAAA,EACzC5D,aAAa,CAAC4I,SAAS,CAACtE,IAAI;cAAC;gBAAA0C,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OAC1B,CAAC;YAAA;cAAAH,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OACN;UACH;YAAAH,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OACH;QAAC;UAAAH,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OACC,CACN;MAAA;QAAAH,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OACE,CAAC;IAAA;MAAAH,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OAGH,CAAC,gBAENlI,OAAA;MAAK8H,SAAS,EAAC,YAAY;MAAAnD,QAAA,eACzB3E,OAAA;QAAA2E,QAAA,EAAG;MAAoB;QAAAoD,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAAG;IAAC;MAAAH,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OACxB,CACN,eACClI,OAAA;MAAA+H,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OAEK,CAAC;EAAA;IAAAH,QAAA,EAAAC,YAAA;IAAAC,UAAA;IAAAC,YAAA;EAAA,OACC,CAAC;AAEV,CAAC;AAAC1F,EAAA,CApfID,UAAU;AAAAuH,EAAA,GAAVvH,UAAU;AAsfhB,eAAeA,UAAU;AAAC,IAAAuH,EAAA;AAAAC,YAAA,CAAAD,EAAA","ignoreList":[]},"metadata":{},"sourceType":"module"}